# Version 0.3.0 Planning - Feature Enhancements

**Version**: 0.3.0  
**Target Release**: TBD  
**Focus**: Feature enhancements to improve user experience and functionality

## Overview

Version 0.3.0 focuses on adding frequently requested features that enhance the application's usability and user experience. These features have been identified from the roadmap and user feedback.

## Planned Features

### 1. 🌓 Dark Mode / Light Mode Toggle

**Priority**: High  
**Complexity**: Medium  
**Estimated Effort**: 2-3 days

#### Description
Add support for system-level and manual theme switching between dark and light modes.

#### Technical Approach
- **Frontend**: 
  - Implement CSS variables for theme colors
  - Create theme context provider in React
  - Add theme toggle UI component in settings
  - Persist theme preference in local storage
- **Backend**: 
  - Add theme preference to settings store
  - Emit theme-change events when system theme changes

#### Implementation Details
```typescript
// Theme types
type Theme = 'light' | 'dark' | 'system';

// CSS variables structure
:root[data-theme='light'] {
  --bg-primary: #ffffff;
  --text-primary: #000000;
  // ...
}

:root[data-theme='dark'] {
  --bg-primary: #1a1a1a;
  --text-primary: #ffffff;
  // ...
}
```

#### Acceptance Criteria
- [ ] System theme detection works on all platforms
- [ ] Manual theme toggle in settings
- [ ] Theme preference persists across restarts
- [ ] All UI components properly styled in both themes
- [ ] Smooth transition animation between themes
- [ ] Tray icon changes based on theme (macOS/Windows)

---

### 2. 🔔 System Notifications for New Wallpapers

**Priority**: Medium  
**Complexity**: Low  
**Estimated Effort**: 1-2 days

#### Description
Show native system notifications when new wallpapers are downloaded or when auto-update applies a new wallpaper.

#### Technical Approach
- **Backend**:
  - Use Tauri notification plugin (already in dependencies)
  - Send notifications after successful wallpaper download
  - Add notification toggle in settings
  - Include wallpaper title and thumbnail in notification

#### Implementation Details
```rust
// Notification service
pub async fn notify_new_wallpaper(
    app: &AppHandle,
    wallpaper: &LocalWallpaper,
) -> Result<()> {
    let settings = get_settings(app).await?;
    
    if settings.enable_notifications {
        app.notification()
            .builder()
            .title("New Wallpaper Available")
            .body(&wallpaper.title)
            .show()?;
    }
    
    Ok(())
}
```

#### Acceptance Criteria
- [ ] Notification shown when new wallpaper downloaded
- [ ] Notification shown when auto-update sets new wallpaper
- [ ] Settings toggle to enable/disable notifications
- [ ] Notification includes wallpaper title and date
- [ ] Click notification to show app window
- [ ] Respects system notification preferences
- [ ] Works on macOS, Windows, and Linux

---

### 3. 🌍 Multi-Language Support (i18n)

**Priority**: Medium  
**Complexity**: Medium-High  
**Estimated Effort**: 3-4 days

#### Description
Add internationalization support with initial languages: English and Chinese.

#### Technical Approach
- **Frontend**:
  - Use `react-i18next` for React components
  - Extract all UI strings to language files
  - Add language selector in settings
  - Auto-detect system language on first launch
- **Backend**:
  - Store language preference in settings
  - Handle date/time formatting based on locale

#### Implementation Details
```typescript
// Language files structure
src/
  locales/
    en/
      common.json
      settings.json
      wallpaper.json
    zh/
      common.json
      settings.json
      wallpaper.json

// i18n configuration
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';

i18n
  .use(initReactI18next)
  .init({
    resources: {
      en: { ... },
      zh: { ... }
    },
    lng: 'en',
    fallbackLng: 'en',
  });
```

#### Supported Languages (Initial)
- English (en)
- 简体中文 (zh-CN)

#### Acceptance Criteria
- [ ] All UI text translatable
- [ ] Language selector in settings
- [ ] System language auto-detection
- [ ] Language preference persists
- [ ] Date/time formatted per locale
- [ ] Error messages translated
- [ ] Both English and Chinese fully translated
- [ ] README updated with language info

---

### 4. ⭐ Wallpaper Favorites

**Priority**: High  
**Complexity**: Medium-High  
**Estimated Effort**: 3-4 days

#### Description
Allow users to mark wallpapers as favorites to prevent them from being auto-cleaned and provide quick access.

#### Technical Approach
- **Data Model**:
  - Add `is_favorite` boolean field to `LocalWallpaper` struct
  - Update index manager to persist favorite status
  - Exclude favorites from cleanup operations
- **Frontend**:
  - Add star/heart icon button on wallpaper cards
  - Add "Favorites" filter tab in main view
  - Visual indicator for favorited wallpapers
- **Backend**:
  - Update cleanup logic to skip favorites
  - Add `toggle_favorite` command
  - Add `get_favorite_wallpapers` command

#### Implementation Details
```rust
// Data model update
#[derive(Serialize, Deserialize, Clone, Debug)]
pub struct LocalWallpaper {
    // ... existing fields
    #[serde(default)]
    pub is_favorite: bool,
}

// New commands
#[tauri::command]
async fn toggle_favorite(
    state: State<'_, AppState>,
    wallpaper_id: String,
) -> Result<bool, String> {
    // Toggle favorite status
}

#[tauri::command]
async fn get_favorite_wallpapers(
    state: State<'_, AppState>,
) -> Result<Vec<LocalWallpaper>, String> {
    // Return only favorited wallpapers
}
```

#### UI Design
```
┌─────────────────────────────────────┐
│ All | Favorites                      │
├─────────────────────────────────────┤
│ ┌───────────┐  ┌───────────┐       │
│ │  [Image]  │  │  [Image]  │       │
│ │    ⭐     │  │    ☆      │       │
│ │  [Title]  │  │  [Title]  │       │
│ └───────────┘  └───────────┘       │
└─────────────────────────────────────┘
```

#### Acceptance Criteria
- [ ] Star/heart button on each wallpaper card
- [ ] Toggle favorite with single click
- [ ] "Favorites" filter tab in main view
- [ ] Visual indicator for favorited wallpapers
- [ ] Favorites excluded from auto-cleanup
- [ ] Favorite status persists across restarts
- [ ] Export/import favorites capability
- [ ] Favorites count shown in UI

---

## Implementation Priority

Based on user value and technical dependencies:

1. **Phase 1** (High Priority):
   - Wallpaper Favorites
   - Dark Mode / Light Mode

2. **Phase 2** (Medium Priority):
   - System Notifications
   - Multi-Language Support

## Technical Considerations

### Database Schema Changes
- Add `is_favorite` field to wallpaper metadata
- Backward compatibility for existing installations

### Settings Schema Updates
```rust
#[derive(Serialize, Deserialize, Clone)]
pub struct AppSettings {
    // Existing fields...
    
    // New fields for v0.3.0
    #[serde(default = "default_theme")]
    pub theme: String,  // "light", "dark", "system"
    
    #[serde(default = "default_notifications")]
    pub enable_notifications: bool,
    
    #[serde(default = "default_language")]
    pub language: String,  // "en", "zh-CN"
}
```

### Migration Strategy
- Version migration script for existing users
- Graceful fallback for missing fields
- Settings upgrade on app launch

## Testing Requirements

Each feature must include:
- [ ] Unit tests for core logic
- [ ] Integration tests for commands
- [ ] Frontend component tests
- [ ] Manual testing on all platforms (macOS, Windows, Linux)
- [ ] Accessibility testing (especially for theme switching)

## Documentation Requirements

- [ ] Update README with new features
- [ ] Update CHANGELOG for 0.3.0
- [ ] Add user guide for new features
- [ ] API documentation for new commands
- [ ] Developer guide updates

## Release Checklist

Before releasing 0.3.0:
- [ ] All features implemented and tested
- [ ] No critical bugs
- [ ] Performance benchmarks pass
- [ ] All platforms tested
- [ ] Documentation complete
- [ ] CHANGELOG updated
- [ ] GitHub release notes prepared
- [ ] Binary builds successful for all platforms

## Future Considerations (Post-0.3.0)

Features to consider for 0.4.0 and beyond:
- Wallpaper slideshow/rotation
- Custom wallpaper sources
- Wallpaper categories/tags
- Search and filter improvements
- Cloud sync for favorites
- Wallpaper editing tools
- Custom download schedules
- Multiple monitor individual wallpapers

---

**Document Status**: Draft  
**Last Updated**: 2025-10-28  
**Next Review**: TBD
