# Changelog

All notable changes to Bing Wallpaper Now will be documented in this file.

## 0.4.3

### Changed

- ✨ **扩展应用标语库**
  - 中文标语从 10 条扩展至 20 条，提供更丰富的文案选择
  - 新增标语精选自现代文学作品和哲学思辨，语言更加文艺优雅
  - 优化时间段选择机制：早上（6:00-12:00）显示积极向上的文案，下午（12:00-18:00）显示探索发现的文案，晚上（18:00-6:00）显示安静温馨的文案
  - 每天打开应用都能看到不同的启发文字，减少重复感，增强新鲜体验

## 0.4.2

### Changed

- ✨ **更新应用标语内容**
  - 更新中文标语为更具文学性和启发性的句子，选自现代诗人、文学家和流行文化
  - 更新英文标语为经典的理想主义和浪漫主义名句
  - 标语包括来自泰戈尔、汪国真、高晓松、顾城、七堇年、路遥等作者的名言
  - 英文标语包括来自托尔金、王尔德、甘地、乔布斯、丁尼生等作家的经典语句
  - 提升用户体验，每次打开应用都能看到鼓舞人心的文字

## 0.4.1

### Changed

- 🔧 **优化"自动应用新壁纸"功能**
  - 将设置名称从"自动更新壁纸"改为"自动应用新壁纸"，更准确地反映功能
  - 关闭时：仍会自动获取新壁纸，但不会自动应用，需要手动点击设置
  - 开启时：自动获取新壁纸，并在检测到更新的壁纸时自动应用该壁纸
  - 提升用户体验，让用户更好地控制壁纸的自动应用行为

### Fixed

- 🐛 **修复图片加载路径问题**
  - 修复壁纸目录未加载完成时导致的 asset protocol 路径错误
  - 添加路径验证，确保只在有效路径时才调用 convertFileSrc
  - 修复空路径时的错误处理，避免无效的相对路径

- 🐛 **修复错误消息国际化**
  - 修复"无法获取壁纸目录"错误消息的国际化问题
  - 添加对应的英文翻译，确保多语言支持完整

## 0.4.0

### Changed

- 🔧 **索引格式优化（v4）**
  - 索引版本从 v3 升级到 v4
  - 使用短字段名（t, c, l, d, u）以节省存储空间
  - 使用紧凑 JSON 格式（无格式化），进一步减小文件大小
  - 索引最大条目数限制提升至 2000（约 5.5 年历史记录）
  - 使用 IndexMap 保持 JSON 序列化时的顺序

- 🗑️ **移除旧版本支持**
  - 移除所有 v3 及更早版本的迁移逻辑
  - 版本不匹配时直接返回空索引，不再创建备份文件
  - 简化代码逻辑，提高可维护性

### Fixed

- 🐛 **修复前端数据格式不匹配问题**
  - 修复后端返回短字段名但前端期望完整字段名的问题
  - 添加数据格式转换函数，自动将后端格式转换为前端格式
  - 修复 React key 警告问题

- 🐛 **修复测试用例**
  - 更新所有测试用例以适配新的数据格式
  - 移除已删除字段（keep_image_count）的测试用例
  - 确保所有测试通过
